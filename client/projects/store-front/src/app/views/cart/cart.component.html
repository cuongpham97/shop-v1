<div class="jumbotron">
  <div class="container">
    <div class="cart">
      <h4 class="title">Giỏ hàng</h4>
      <form [formGroup]="form">
        <div *ngIf="items?.length else empty" class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr class="text-center">
                <th></th>
                <th>Hình ảnh</th>
                <th>Sản phẩm</th>
                <th>Số lượng</th>
                <th>Đơn giá</th>
                <th>Thành tiền</th>
                <th>Thao tác</th>
              </tr>
            </thead>
            <tbody formArrayName="lines">
              <tr *ngFor="let item of items; let index = index">
                <td class="text-center align-middle">
                  <div class="pretty p-icon p-smooth">
                    <input [formControlName]="index" type="checkbox">
                    <div class="state p-success">
                      <i class="icon material-icons">done</i>
                      <label></label>
                    </div>
                  </div>
                </td>
                <td class="text-center align-middle">
                  <div class="image"> <img [src]="item.images[0].url"> </div>
                </td>
                <td class="align-middle"><span class="name"><a class="name"
                      [routerLink]="['/products', item.product]" target="_blank">{{ item.name }}</a></span><br>
                  <span class="join-item">
                    <span *ngFor="let attr of item.attributes" class="type">{{ attr.value }}</span>
                  </span>
                </td>
                <td class="align-middle">
                  <input type="text" class="form-control quantity" value="{{ item.quantity }}">
                </td>
                <td class="text-right align-middle">
                  {{ item.pricing.price | currency: ' ₫' }}<br>
                  <span *ngIf="item.pricing.salePrice" class="regularPrice"> {{ item.price | currency: ' ₫' }}</span>
                </td>
                <td class="text-right align-middle">{{ item.quantity * item.pricing.price | currency: ' ₫' }}
                </td>
                <td class="text-right align-middle"><a (click)="removeCartAt(index)"><i
                      class="fa fa-trash text-danger"></i></a></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td class="text-right border-0" colspan="7"><span class="total">Tổng:
                  {{ total | currency: ' đ'}}</span>
                </td>
              </tr>
            </tfoot>
          </table>
          <div class="text-right">
            <button [disabled]="!isSelectedProduct" (click)="checkout()" class="btn btn-danger">Đặt hàng</button>
          </div>
        </div>
      </form>

      <ng-template #empty>
        <div class="text-center m-5">
          <img class="empty-image" src="assets/img/empty-cart.png">
        </div>

        <div class="text-center">
          <button routerLink="" class="btn btn-danger">Tiếp tục mua</button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
